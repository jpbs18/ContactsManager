2023-07-16 12:34:36.422 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.9' with options: None
2023-07-16 12:35:30.401 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.9' with options: None
2023-07-16 12:35:30.733 +01:00 [INF] Executed DbCommand (194ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [ContactsDatabase];
2023-07-16 12:35:30.807 +01:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [ContactsDatabase] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-07-16 12:35:30.816 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-07-16 12:35:30.907 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-07-16 12:35:30.909 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-07-16 12:35:30.927 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-07-16 12:35:30.931 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-07-16 12:35:30.945 +01:00 [INF] Applying migration '20230716113436_Initial'.
2023-07-16 12:35:30.992 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Countries] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(30) NULL,
    CONSTRAINT [PK_Countries] PRIMARY KEY ([Id])
);
2023-07-16 12:35:30.995 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Persons] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(40) NULL,
    [Email] nvarchar(40) NULL,
    [BirthDate] datetime2 NULL,
    [Gender] nvarchar(10) NULL,
    [CountryId] uniqueidentifier NULL,
    [Address] varchar(120) NULL DEFAULT 'Porto',
    [ReceivedNewsLetter] bit NOT NULL,
    CONSTRAINT [PK_Persons] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Persons_Countries_CountryId] FOREIGN KEY ([CountryId]) REFERENCES [Countries] ([Id])
);
2023-07-16 12:35:31.025 +01:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name') AND [object_id] = OBJECT_ID(N'[Countries]'))
    SET IDENTITY_INSERT [Countries] ON;
INSERT INTO [Countries] ([Id], [Name])
VALUES ('158f59f7-5aad-4c8e-8bd0-ba95f4033887', N'Italy'),
('87c7d73a-8383-4b22-b728-0c0f1bb6eac0', N'Argentina'),
('8a05aaee-3985-47e2-8034-f05fa0e8d2ea', N'Australia'),
('a4e032a1-9fc6-4f22-be31-73daf564ad41', N'USA'),
('ea75f617-0e2e-41d8-aa52-0caac5dd9072', N'Portugal');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name') AND [object_id] = OBJECT_ID(N'[Countries]'))
    SET IDENTITY_INSERT [Countries] OFF;
2023-07-16 12:35:31.039 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Address', N'BirthDate', N'CountryId', N'Email', N'Gender', N'Name', N'ReceivedNewsLetter') AND [object_id] = OBJECT_ID(N'[Persons]'))
    SET IDENTITY_INSERT [Persons] ON;
INSERT INTO [Persons] ([Id], [Address], [BirthDate], [CountryId], [Email], [Gender], [Name], [ReceivedNewsLetter])
VALUES ('0d01ee24-e384-42d5-b4ee-a7b7a0d4aa45', 'Águas Santas', '1992-08-08T00:00:00.0000000', 'ea75f617-0e2e-41d8-aa52-0caac5dd9072', N'jorge.basto@hotmail.com', N'Male', N'Jorge Basto', CAST(1 AS bit)),
('5f1e1be5-26ea-4bdc-88fb-78102955e0af', 'Maia', '1964-02-06T00:00:00.0000000', '158f59f7-5aad-4c8e-8bd0-ba95f4033887', N'j.santos_1964@hotmail.com', N'Male', N'Joaquim Santos', CAST(1 AS bit)),
('71cb2bb8-dd80-4d7c-9dba-422489b8fa7e', 'Maia', '1991-04-16T00:00:00.0000000', '8a05aaee-3985-47e2-8034-f05fa0e8d2ea', N'adelia.santos@hotmail.com', N'Female', N'Adélia Santos', CAST(0 AS bit)),
('d7271c89-a711-4ce5-b8b1-da7288010cf6', 'Maia', '1991-04-16T00:00:00.0000000', 'ea75f617-0e2e-41d8-aa52-0caac5dd9072', N'j.p.santos21@hotmail.com', N'Male', N'João Santos', CAST(1 AS bit)),
('fb7a7144-68a8-4b4e-8e7f-6ea77610a48c', 'Castêlo da Maia', '1991-08-31T00:00:00.0000000', 'a4e032a1-9fc6-4f22-be31-73daf564ad41', N'claudia.silva@hotmail.com', N'Female', N'Cláudia Silva', CAST(1 AS bit));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Address', N'BirthDate', N'CountryId', N'Email', N'Gender', N'Name', N'ReceivedNewsLetter') AND [object_id] = OBJECT_ID(N'[Persons]'))
    SET IDENTITY_INSERT [Persons] OFF;
2023-07-16 12:35:31.043 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Persons_CountryId] ON [Persons] ([CountryId]);
2023-07-16 12:35:31.044 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230716113436_Initial', N'6.0.9');
2023-07-16 12:36:41.750 +01:00 [INF] User profile is available. Using 'C:\Users\João\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-07-16 12:36:42.009 +01:00 [INF] Now listening on: http://localhost:5166
2023-07-16 12:36:44.141 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5166/ - -
2023-07-16 12:36:44.218 +01:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Connection: keep-alive
Host: localhost:5166
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36
Accept-Encoding: gzip, deflate, br
Accept-Language: pt-PT,pt;q=0.9,en-US;q=0.8,en;q=0.7
Cookie: [Redacted]
Upgrade-Insecure-Requests: [Redacted]
sec-ch-ua: [Redacted]
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
Sec-Fetch-Site: [Redacted]
Sec-Fetch-Mode: [Redacted]
Sec-Fetch-User: [Redacted]
Sec-Fetch-Dest: [Redacted]
2023-07-16 12:36:44.224 +01:00 [INF] Executing endpoint 'CrudExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2023-07-16 12:36:44.294 +01:00 [INF] Route matched with {action = "Index", controller = "Persons"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, System.String, System.String, ServiceContracts.Enums.SortOrderOptions) on controller CrudExample.Controllers.PersonsController (ContactsManager.UI).
2023-07-16 12:36:44.895 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:44.899 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:44.901 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:44.904 +01:00 [INF] PersonsListActionFilter.OnActionExecuting method
2023-07-16 12:36:44.908 +01:00 [INF] Index action method of PersonsController
2023-07-16 12:36:44.913 +01:00 [INF] GetFilteredPersons of PersonsService
2023-07-16 12:36:44.915 +01:00 [INF] GetAllPersons of PersonsService
2023-07-16 12:36:44.917 +01:00 [INF] GetAllPersons of PersonsRepository
2023-07-16 12:36:46.004 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.9' with options: None
2023-07-16 12:36:46.716 +01:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Address], [p].[BirthDate], [p].[CountryId], [p].[Email], [p].[Gender], [p].[Name], [p].[ReceivedNewsLetter], [c].[Id], [c].[Name]
FROM [Persons] AS [p]
LEFT JOIN [Countries] AS [c] ON [p].[CountryId] = [c].[Id]
2023-07-16 12:36:46.875 +01:00 [INF] GetSortedPersons of PersonsService
2023-07-16 12:36:46.892 +01:00 [INF] PersonsListActionFilter.OnActionExecuted method
2023-07-16 12:36:46.944 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:46.946 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:46.947 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:46.952 +01:00 [INF] PersonsListResultFilter.OnResultExecutionAsync - before action result
2023-07-16 12:36:46.963 +01:00 [INF] Executing ViewResult, running view Index.
2023-07-16 12:36:47.189 +01:00 [INF] Response:
StatusCode: 200
Content-Type: text/html; charset=utf-8
X-Custom-Key: [Redacted]
2023-07-16 12:36:47.212 +01:00 [INF] Executed ViewResult - view Index executed in 249.5753ms.
2023-07-16 12:36:47.216 +01:00 [INF] PersonsListResultFilter.OnResultExecutionAsync - after action result
2023-07-16 12:36:47.455 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5166/StyleSheet.css - -
2023-07-16 12:36:47.455 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5166/_framework/aspnetcore-browser-refresh.js - -
2023-07-16 12:36:47.455 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5166/logo.png?v=_Bl4SCjQHZKOU5aHweT4Ncy1s-zvv6SXNo8gUKmU8oY - -
2023-07-16 12:36:47.460 +01:00 [INF] Executed action CrudExample.Controllers.PersonsController.Index (ContactsManager.UI) in 3161.996ms
2023-07-16 12:36:47.463 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5166/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 7.7796ms
2023-07-16 12:36:47.467 +01:00 [INF] Executed endpoint 'CrudExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2023-07-16 12:36:47.487 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at CrudExample.Filters.ResultFilters.PersonsListResultFilter.OnResultExecutionAsync(ResultExecutingContext context, ResultExecutionDelegate next) in C:\Users\João\aspnetcore\ContactsManagerSolution\ContactsManager.UI\Filters\ResultFilters\PersonsListResultFilter.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-16 12:36:47.502 +01:00 [INF] Sending file. Request path: '/logo.png'. Physical path: 'C:\Users\João\aspnetcore\ContactsManagerSolution\ContactsManager.UI\wwwroot\logo.png'
2023-07-16 12:36:47.514 +01:00 [INF] Sending file. Request path: '/StyleSheet.css'. Physical path: 'C:\Users\João\aspnetcore\ContactsManagerSolution\ContactsManager.UI\wwwroot\StyleSheet.css'
2023-07-16 12:36:47.635 +01:00 [WRN] The response has already started, the error page middleware will not be executed.
2023-07-16 12:36:47.636 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5166/logo.png?v=_Bl4SCjQHZKOU5aHweT4Ncy1s-zvv6SXNo8gUKmU8oY - - - 200 68664 image/png 181.5607ms
2023-07-16 12:36:47.637 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5166/StyleSheet.css - - - 200 8790 text/css 181.9542ms
2023-07-16 12:36:47.638 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at CrudExample.Filters.ResultFilters.PersonsListResultFilter.OnResultExecutionAsync(ResultExecutingContext context, ResultExecutionDelegate next) in C:\Users\João\aspnetcore\ContactsManagerSolution\ContactsManager.UI\Filters\ResultFilters\PersonsListResultFilter.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-16 12:36:47.651 +01:00 [WRN] The response has already started, the error page middleware will not be executed.
2023-07-16 12:36:47.686 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5166/ - - - 200 - text/html;+charset=utf-8 3549.7729ms
2023-07-16 12:36:49.361 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5166/persons/index?searchBy=&searchString=&sortBy=Name&sortOrder=DESC - -
2023-07-16 12:36:49.367 +01:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /persons/index
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Connection: keep-alive
Host: localhost:5166
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36
Accept-Encoding: gzip, deflate, br
Accept-Language: pt-PT,pt;q=0.9,en-US;q=0.8,en;q=0.7
Cookie: [Redacted]
Referer: [Redacted]
Upgrade-Insecure-Requests: [Redacted]
sec-ch-ua: [Redacted]
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
Sec-Fetch-Site: [Redacted]
Sec-Fetch-Mode: [Redacted]
Sec-Fetch-User: [Redacted]
Sec-Fetch-Dest: [Redacted]
2023-07-16 12:36:49.369 +01:00 [INF] Executing endpoint 'CrudExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2023-07-16 12:36:49.374 +01:00 [INF] Route matched with {action = "Index", controller = "Persons"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, System.String, System.String, ServiceContracts.Enums.SortOrderOptions) on controller CrudExample.Controllers.PersonsController (ContactsManager.UI).
2023-07-16 12:36:49.385 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:49.387 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:49.389 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:49.390 +01:00 [INF] PersonsListActionFilter.OnActionExecuting method
2023-07-16 12:36:49.391 +01:00 [INF] Index action method of PersonsController
2023-07-16 12:36:49.393 +01:00 [INF] GetFilteredPersons of PersonsService
2023-07-16 12:36:49.393 +01:00 [INF] GetAllPersons of PersonsService
2023-07-16 12:36:49.394 +01:00 [INF] GetAllPersons of PersonsRepository
2023-07-16 12:36:49.396 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.9' with options: None
2023-07-16 12:36:49.407 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Address], [p].[BirthDate], [p].[CountryId], [p].[Email], [p].[Gender], [p].[Name], [p].[ReceivedNewsLetter], [c].[Id], [c].[Name]
FROM [Persons] AS [p]
LEFT JOIN [Countries] AS [c] ON [p].[CountryId] = [c].[Id]
2023-07-16 12:36:49.416 +01:00 [INF] GetSortedPersons of PersonsService
2023-07-16 12:36:49.419 +01:00 [INF] PersonsListActionFilter.OnActionExecuted method
2023-07-16 12:36:49.431 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:49.432 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:49.434 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:49.435 +01:00 [INF] PersonsListResultFilter.OnResultExecutionAsync - before action result
2023-07-16 12:36:49.436 +01:00 [INF] Executing ViewResult, running view Index.
2023-07-16 12:36:49.450 +01:00 [INF] Response:
StatusCode: 200
Content-Type: text/html; charset=utf-8
X-Custom-Key: [Redacted]
2023-07-16 12:36:49.452 +01:00 [INF] Executed ViewResult - view Index executed in 15.6868ms.
2023-07-16 12:36:49.453 +01:00 [INF] PersonsListResultFilter.OnResultExecutionAsync - after action result
2023-07-16 12:36:49.576 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5166/_framework/aspnetcore-browser-refresh.js - -
2023-07-16 12:36:49.577 +01:00 [INF] Executed action CrudExample.Controllers.PersonsController.Index (ContactsManager.UI) in 198.7205ms
2023-07-16 12:36:49.577 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5166/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 53.9001ms
2023-07-16 12:36:49.580 +01:00 [INF] Executed endpoint 'CrudExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2023-07-16 12:36:49.584 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at CrudExample.Filters.ResultFilters.PersonsListResultFilter.OnResultExecutionAsync(ResultExecutingContext context, ResultExecutionDelegate next) in C:\Users\João\aspnetcore\ContactsManagerSolution\ContactsManager.UI\Filters\ResultFilters\PersonsListResultFilter.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-16 12:36:49.595 +01:00 [WRN] The response has already started, the error page middleware will not be executed.
2023-07-16 12:36:49.596 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at CrudExample.Filters.ResultFilters.PersonsListResultFilter.OnResultExecutionAsync(ResultExecutingContext context, ResultExecutionDelegate next) in C:\Users\João\aspnetcore\ContactsManagerSolution\ContactsManager.UI\Filters\ResultFilters\PersonsListResultFilter.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-16 12:36:49.608 +01:00 [WRN] The response has already started, the error page middleware will not be executed.
2023-07-16 12:36:49.628 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5166/persons/index?searchBy=&searchString=&sortBy=Name&sortOrder=DESC - - - 200 - text/html;+charset=utf-8 266.6438ms
2023-07-16 12:36:50.096 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5166/persons/index?searchBy=&searchString=&sortBy=Name&sortOrder=ASC - -
2023-07-16 12:36:50.101 +01:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /persons/index
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Connection: keep-alive
Host: localhost:5166
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36
Accept-Encoding: gzip, deflate, br
Accept-Language: pt-PT,pt;q=0.9,en-US;q=0.8,en;q=0.7
Cookie: [Redacted]
Referer: [Redacted]
Upgrade-Insecure-Requests: [Redacted]
sec-ch-ua: [Redacted]
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
Sec-Fetch-Site: [Redacted]
Sec-Fetch-Mode: [Redacted]
Sec-Fetch-User: [Redacted]
Sec-Fetch-Dest: [Redacted]
2023-07-16 12:36:50.104 +01:00 [INF] Executing endpoint 'CrudExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2023-07-16 12:36:50.105 +01:00 [INF] Route matched with {action = "Index", controller = "Persons"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, System.String, System.String, ServiceContracts.Enums.SortOrderOptions) on controller CrudExample.Controllers.PersonsController (ContactsManager.UI).
2023-07-16 12:36:50.113 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:50.116 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:50.118 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:50.120 +01:00 [INF] PersonsListActionFilter.OnActionExecuting method
2023-07-16 12:36:50.122 +01:00 [INF] Index action method of PersonsController
2023-07-16 12:36:50.123 +01:00 [INF] GetFilteredPersons of PersonsService
2023-07-16 12:36:50.124 +01:00 [INF] GetAllPersons of PersonsService
2023-07-16 12:36:50.125 +01:00 [INF] GetAllPersons of PersonsRepository
2023-07-16 12:36:50.175 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.9' with options: None
2023-07-16 12:36:50.185 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Address], [p].[BirthDate], [p].[CountryId], [p].[Email], [p].[Gender], [p].[Name], [p].[ReceivedNewsLetter], [c].[Id], [c].[Name]
FROM [Persons] AS [p]
LEFT JOIN [Countries] AS [c] ON [p].[CountryId] = [c].[Id]
2023-07-16 12:36:50.196 +01:00 [INF] GetSortedPersons of PersonsService
2023-07-16 12:36:50.199 +01:00 [INF] PersonsListActionFilter.OnActionExecuted method
2023-07-16 12:36:50.203 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:50.204 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:50.205 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:50.206 +01:00 [INF] PersonsListResultFilter.OnResultExecutionAsync - before action result
2023-07-16 12:36:50.207 +01:00 [INF] Executing ViewResult, running view Index.
2023-07-16 12:36:50.211 +01:00 [INF] Response:
StatusCode: 200
Content-Type: text/html; charset=utf-8
X-Custom-Key: [Redacted]
2023-07-16 12:36:50.212 +01:00 [INF] Executed ViewResult - view Index executed in 4.5052ms.
2023-07-16 12:36:50.214 +01:00 [INF] PersonsListResultFilter.OnResultExecutionAsync - after action result
2023-07-16 12:36:50.349 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5166/_framework/aspnetcore-browser-refresh.js - -
2023-07-16 12:36:50.350 +01:00 [INF] Executed action CrudExample.Controllers.PersonsController.Index (ContactsManager.UI) in 243.0089ms
2023-07-16 12:36:50.351 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5166/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 66.6912ms
2023-07-16 12:36:50.354 +01:00 [INF] Executed endpoint 'CrudExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2023-07-16 12:36:50.357 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at CrudExample.Filters.ResultFilters.PersonsListResultFilter.OnResultExecutionAsync(ResultExecutingContext context, ResultExecutionDelegate next) in C:\Users\João\aspnetcore\ContactsManagerSolution\ContactsManager.UI\Filters\ResultFilters\PersonsListResultFilter.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-16 12:36:50.373 +01:00 [WRN] The response has already started, the error page middleware will not be executed.
2023-07-16 12:36:50.374 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at CrudExample.Filters.ResultFilters.PersonsListResultFilter.OnResultExecutionAsync(ResultExecutingContext context, ResultExecutionDelegate next) in C:\Users\João\aspnetcore\ContactsManagerSolution\ContactsManager.UI\Filters\ResultFilters\PersonsListResultFilter.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-16 12:36:50.389 +01:00 [WRN] The response has already started, the error page middleware will not be executed.
2023-07-16 12:36:50.408 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5166/persons/index?searchBy=&searchString=&sortBy=Name&sortOrder=ASC - - - 200 - text/html;+charset=utf-8 312.5287ms
2023-07-16 12:36:51.197 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5166/persons/index?searchBy=&searchString=&sortBy=Address&sortOrder=DESC - -
2023-07-16 12:36:51.200 +01:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /persons/index
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Connection: keep-alive
Host: localhost:5166
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36
Accept-Encoding: gzip, deflate, br
Accept-Language: pt-PT,pt;q=0.9,en-US;q=0.8,en;q=0.7
Cookie: [Redacted]
Referer: [Redacted]
Upgrade-Insecure-Requests: [Redacted]
sec-ch-ua: [Redacted]
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
Sec-Fetch-Site: [Redacted]
Sec-Fetch-Mode: [Redacted]
Sec-Fetch-User: [Redacted]
Sec-Fetch-Dest: [Redacted]
2023-07-16 12:36:51.202 +01:00 [INF] Executing endpoint 'CrudExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2023-07-16 12:36:51.203 +01:00 [INF] Route matched with {action = "Index", controller = "Persons"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, System.String, System.String, ServiceContracts.Enums.SortOrderOptions) on controller CrudExample.Controllers.PersonsController (ContactsManager.UI).
2023-07-16 12:36:51.206 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:51.207 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:51.209 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:51.210 +01:00 [INF] PersonsListActionFilter.OnActionExecuting method
2023-07-16 12:36:51.212 +01:00 [INF] Index action method of PersonsController
2023-07-16 12:36:51.212 +01:00 [INF] GetFilteredPersons of PersonsService
2023-07-16 12:36:51.213 +01:00 [INF] GetAllPersons of PersonsService
2023-07-16 12:36:51.214 +01:00 [INF] GetAllPersons of PersonsRepository
2023-07-16 12:36:51.215 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.9' with options: None
2023-07-16 12:36:51.223 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Address], [p].[BirthDate], [p].[CountryId], [p].[Email], [p].[Gender], [p].[Name], [p].[ReceivedNewsLetter], [c].[Id], [c].[Name]
FROM [Persons] AS [p]
LEFT JOIN [Countries] AS [c] ON [p].[CountryId] = [c].[Id]
2023-07-16 12:36:51.230 +01:00 [INF] GetSortedPersons of PersonsService
2023-07-16 12:36:51.235 +01:00 [INF] PersonsListActionFilter.OnActionExecuted method
2023-07-16 12:36:51.239 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:51.245 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:51.246 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:51.247 +01:00 [INF] PersonsListResultFilter.OnResultExecutionAsync - before action result
2023-07-16 12:36:51.248 +01:00 [INF] Executing ViewResult, running view Index.
2023-07-16 12:36:51.251 +01:00 [INF] Response:
StatusCode: 200
Content-Type: text/html; charset=utf-8
X-Custom-Key: [Redacted]
2023-07-16 12:36:51.252 +01:00 [INF] Executed ViewResult - view Index executed in 3.2927ms.
2023-07-16 12:36:51.254 +01:00 [INF] PersonsListResultFilter.OnResultExecutionAsync - after action result
2023-07-16 12:36:51.384 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5166/_framework/aspnetcore-browser-refresh.js - -
2023-07-16 12:36:51.385 +01:00 [INF] Executed action CrudExample.Controllers.PersonsController.Index (ContactsManager.UI) in 179.0306ms
2023-07-16 12:36:51.385 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5166/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 61.1577ms
2023-07-16 12:36:51.388 +01:00 [INF] Executed endpoint 'CrudExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2023-07-16 12:36:51.390 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at CrudExample.Filters.ResultFilters.PersonsListResultFilter.OnResultExecutionAsync(ResultExecutingContext context, ResultExecutionDelegate next) in C:\Users\João\aspnetcore\ContactsManagerSolution\ContactsManager.UI\Filters\ResultFilters\PersonsListResultFilter.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-16 12:36:51.400 +01:00 [WRN] The response has already started, the error page middleware will not be executed.
2023-07-16 12:36:51.401 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at CrudExample.Filters.ResultFilters.PersonsListResultFilter.OnResultExecutionAsync(ResultExecutingContext context, ResultExecutionDelegate next) in C:\Users\João\aspnetcore\ContactsManagerSolution\ContactsManager.UI\Filters\ResultFilters\PersonsListResultFilter.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-16 12:36:51.414 +01:00 [WRN] The response has already started, the error page middleware will not be executed.
2023-07-16 12:36:51.430 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5166/persons/index?searchBy=&searchString=&sortBy=Address&sortOrder=DESC - - - 200 - text/html;+charset=utf-8 232.9710ms
2023-07-16 12:36:57.403 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5166/Persons/Index?searchBy=Email&searchString=adelia.santos%40hotmail.com - -
2023-07-16 12:36:57.408 +01:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /Persons/Index
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Connection: keep-alive
Host: localhost:5166
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36
Accept-Encoding: gzip, deflate, br
Accept-Language: pt-PT,pt;q=0.9,en-US;q=0.8,en;q=0.7
Cookie: [Redacted]
Referer: [Redacted]
Upgrade-Insecure-Requests: [Redacted]
sec-ch-ua: [Redacted]
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
Sec-Fetch-Site: [Redacted]
Sec-Fetch-Mode: [Redacted]
Sec-Fetch-User: [Redacted]
Sec-Fetch-Dest: [Redacted]
2023-07-16 12:36:57.412 +01:00 [INF] Executing endpoint 'CrudExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2023-07-16 12:36:57.414 +01:00 [INF] Route matched with {action = "Index", controller = "Persons"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, System.String, System.String, ServiceContracts.Enums.SortOrderOptions) on controller CrudExample.Controllers.PersonsController (ContactsManager.UI).
2023-07-16 12:36:57.417 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:57.419 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:57.420 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:57.421 +01:00 [INF] PersonsListActionFilter.OnActionExecuting method
2023-07-16 12:36:57.423 +01:00 [INF] Index action method of PersonsController
2023-07-16 12:36:57.424 +01:00 [INF] GetFilteredPersons of PersonsService
2023-07-16 12:36:57.427 +01:00 [INF] GetFilteredPersons of PersonsRepository
2023-07-16 12:36:57.428 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.9' with options: None
2023-07-16 12:36:57.568 +01:00 [INF] Executed DbCommand (36ms) [Parameters=[@__searchString_0='?' (Size = 40)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Address], [p].[BirthDate], [p].[CountryId], [p].[Email], [p].[Gender], [p].[Name], [p].[ReceivedNewsLetter], [c].[Id], [c].[Name]
FROM [Persons] AS [p]
LEFT JOIN [Countries] AS [c] ON [p].[CountryId] = [c].[Id]
WHERE (([p].[Email] IS NULL) OR ([p].[Email] LIKE N'')) OR ((@__searchString_0 LIKE N'') OR (CHARINDEX(@__searchString_0, [p].[Email]) > 0))
2023-07-16 12:36:57.573 +01:00 [INF] GetSortedPersons of PersonsService
2023-07-16 12:36:57.574 +01:00 [INF] PersonsListActionFilter.OnActionExecuted method
2023-07-16 12:36:57.578 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:57.580 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:57.581 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:57.582 +01:00 [INF] PersonsListResultFilter.OnResultExecutionAsync - before action result
2023-07-16 12:36:57.583 +01:00 [INF] Executing ViewResult, running view Index.
2023-07-16 12:36:57.589 +01:00 [INF] Response:
StatusCode: 200
Content-Type: text/html; charset=utf-8
X-Custom-Key: [Redacted]
2023-07-16 12:36:57.591 +01:00 [INF] Executed ViewResult - view Index executed in 7.5318ms.
2023-07-16 12:36:57.593 +01:00 [INF] PersonsListResultFilter.OnResultExecutionAsync - after action result
2023-07-16 12:36:57.745 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5166/_framework/aspnetcore-browser-refresh.js - -
2023-07-16 12:36:57.745 +01:00 [INF] Executed action CrudExample.Controllers.PersonsController.Index (ContactsManager.UI) in 328.4688ms
2023-07-16 12:36:57.747 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5166/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 2.3132ms
2023-07-16 12:36:57.750 +01:00 [INF] Executed endpoint 'CrudExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2023-07-16 12:36:57.753 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at CrudExample.Filters.ResultFilters.PersonsListResultFilter.OnResultExecutionAsync(ResultExecutingContext context, ResultExecutionDelegate next) in C:\Users\João\aspnetcore\ContactsManagerSolution\ContactsManager.UI\Filters\ResultFilters\PersonsListResultFilter.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-16 12:36:57.766 +01:00 [WRN] The response has already started, the error page middleware will not be executed.
2023-07-16 12:36:57.767 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at CrudExample.Filters.ResultFilters.PersonsListResultFilter.OnResultExecutionAsync(ResultExecutingContext context, ResultExecutionDelegate next) in C:\Users\João\aspnetcore\ContactsManagerSolution\ContactsManager.UI\Filters\ResultFilters\PersonsListResultFilter.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-16 12:36:57.778 +01:00 [WRN] The response has already started, the error page middleware will not be executed.
2023-07-16 12:36:57.797 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5166/Persons/Index?searchBy=Email&searchString=adelia.santos%40hotmail.com - - - 200 - text/html;+charset=utf-8 394.5445ms
2023-07-16 12:36:59.124 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5166/Persons/Index - -
2023-07-16 12:36:59.128 +01:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /Persons/Index
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Connection: keep-alive
Host: localhost:5166
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36
Accept-Encoding: gzip, deflate, br
Accept-Language: pt-PT,pt;q=0.9,en-US;q=0.8,en;q=0.7
Cookie: [Redacted]
Referer: [Redacted]
Upgrade-Insecure-Requests: [Redacted]
sec-ch-ua: [Redacted]
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
Sec-Fetch-Site: [Redacted]
Sec-Fetch-Mode: [Redacted]
Sec-Fetch-User: [Redacted]
Sec-Fetch-Dest: [Redacted]
2023-07-16 12:36:59.131 +01:00 [INF] Executing endpoint 'CrudExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2023-07-16 12:36:59.132 +01:00 [INF] Route matched with {action = "Index", controller = "Persons"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, System.String, System.String, ServiceContracts.Enums.SortOrderOptions) on controller CrudExample.Controllers.PersonsController (ContactsManager.UI).
2023-07-16 12:36:59.135 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:59.136 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:59.137 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:59.139 +01:00 [INF] PersonsListActionFilter.OnActionExecuting method
2023-07-16 12:36:59.140 +01:00 [INF] Index action method of PersonsController
2023-07-16 12:36:59.141 +01:00 [INF] GetFilteredPersons of PersonsService
2023-07-16 12:36:59.143 +01:00 [INF] GetAllPersons of PersonsService
2023-07-16 12:36:59.144 +01:00 [INF] GetAllPersons of PersonsRepository
2023-07-16 12:36:59.145 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.9' with options: None
2023-07-16 12:36:59.150 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Address], [p].[BirthDate], [p].[CountryId], [p].[Email], [p].[Gender], [p].[Name], [p].[ReceivedNewsLetter], [c].[Id], [c].[Name]
FROM [Persons] AS [p]
LEFT JOIN [Countries] AS [c] ON [p].[CountryId] = [c].[Id]
2023-07-16 12:36:59.153 +01:00 [INF] GetSortedPersons of PersonsService
2023-07-16 12:36:59.154 +01:00 [INF] PersonsListActionFilter.OnActionExecuted method
2023-07-16 12:36:59.155 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:59.156 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:59.158 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:36:59.160 +01:00 [INF] PersonsListResultFilter.OnResultExecutionAsync - before action result
2023-07-16 12:36:59.161 +01:00 [INF] Executing ViewResult, running view Index.
2023-07-16 12:36:59.163 +01:00 [INF] Response:
StatusCode: 200
Content-Type: text/html; charset=utf-8
X-Custom-Key: [Redacted]
2023-07-16 12:36:59.165 +01:00 [INF] Executed ViewResult - view Index executed in 3.4275ms.
2023-07-16 12:36:59.167 +01:00 [INF] PersonsListResultFilter.OnResultExecutionAsync - after action result
2023-07-16 12:36:59.284 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5166/_framework/aspnetcore-browser-refresh.js - -
2023-07-16 12:36:59.285 +01:00 [INF] Executed action CrudExample.Controllers.PersonsController.Index (ContactsManager.UI) in 150.1072ms
2023-07-16 12:36:59.286 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5166/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 1.8248ms
2023-07-16 12:36:59.288 +01:00 [INF] Executed endpoint 'CrudExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2023-07-16 12:36:59.291 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at CrudExample.Filters.ResultFilters.PersonsListResultFilter.OnResultExecutionAsync(ResultExecutingContext context, ResultExecutionDelegate next) in C:\Users\João\aspnetcore\ContactsManagerSolution\ContactsManager.UI\Filters\ResultFilters\PersonsListResultFilter.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-16 12:36:59.301 +01:00 [WRN] The response has already started, the error page middleware will not be executed.
2023-07-16 12:36:59.302 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at CrudExample.Filters.ResultFilters.PersonsListResultFilter.OnResultExecutionAsync(ResultExecutingContext context, ResultExecutionDelegate next) in C:\Users\João\aspnetcore\ContactsManagerSolution\ContactsManager.UI\Filters\ResultFilters\PersonsListResultFilter.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-16 12:36:59.312 +01:00 [WRN] The response has already started, the error page middleware will not be executed.
2023-07-16 12:36:59.326 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5166/Persons/Index - - - 200 - text/html;+charset=utf-8 202.0476ms
2023-07-16 12:37:00.244 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5166/Persons/Edit/71cb2bb8-dd80-4d7c-9dba-422489b8fa7e - -
2023-07-16 12:37:00.247 +01:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /Persons/Edit/71cb2bb8-dd80-4d7c-9dba-422489b8fa7e
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Connection: keep-alive
Host: localhost:5166
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36
Accept-Encoding: gzip, deflate, br
Accept-Language: pt-PT,pt;q=0.9,en-US;q=0.8,en;q=0.7
Cookie: [Redacted]
Referer: [Redacted]
Upgrade-Insecure-Requests: [Redacted]
sec-ch-ua: [Redacted]
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
Sec-Fetch-Site: [Redacted]
Sec-Fetch-Mode: [Redacted]
Sec-Fetch-User: [Redacted]
Sec-Fetch-Dest: [Redacted]
2023-07-16 12:37:00.250 +01:00 [INF] Executing endpoint 'CrudExample.Controllers.PersonsController.Edit (ContactsManager.UI)'
2023-07-16 12:37:00.254 +01:00 [INF] Route matched with {action = "Edit", controller = "Persons"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Edit(System.Guid) on controller CrudExample.Controllers.PersonsController (ContactsManager.UI).
2023-07-16 12:37:00.258 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:37:00.260 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:37:00.265 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.9' with options: None
2023-07-16 12:37:00.291 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Address], [p].[BirthDate], [p].[CountryId], [p].[Email], [p].[Gender], [p].[Name], [p].[ReceivedNewsLetter], [c].[Id], [c].[Name]
FROM [Persons] AS [p]
LEFT JOIN [Countries] AS [c] ON [p].[CountryId] = [c].[Id]
WHERE [p].[Id] = @__id_0
2023-07-16 12:37:00.306 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name]
FROM [Countries] AS [c]
2023-07-16 12:37:00.314 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:37:00.315 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:37:00.321 +01:00 [INF] Executing ViewResult, running view Edit.
2023-07-16 12:37:00.419 +01:00 [INF] Response:
StatusCode: 200
Content-Type: text/html; charset=utf-8
Cache-Control: [Redacted]
Pragma: [Redacted]
Set-Cookie: [Redacted]
X-Custom-Key: [Redacted]
X-Frame-Options: [Redacted]
2023-07-16 12:37:00.421 +01:00 [INF] Executed ViewResult - view Edit executed in 99.7296ms.
2023-07-16 12:37:00.423 +01:00 [INF] Executed action CrudExample.Controllers.PersonsController.Edit (ContactsManager.UI) in 165.3657ms
2023-07-16 12:37:00.425 +01:00 [INF] Executed endpoint 'CrudExample.Controllers.PersonsController.Edit (ContactsManager.UI)'
2023-07-16 12:37:00.439 +01:00 [INF] ResponseBody: <!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Edit Person</title>
    <link rel="stylesheet" href="/StyleSheet.css" />
</head>
<body>
    <div class="container">
        <div class="navbar">
            <div class="navbar-brand">
                <img src="/logo.png?v=_Bl4SCjQHZKOU5aHweT4Ncy1s-zvv6SXNo8gUKmU8oY" width="50px" />
            </div>
            <ul>
                <li>
                    <a href="/Persons/Index">Persons</a>
                    <a href="/Countries/UploadFromExcel">Upload Excel File</a>
                </li>
            </ul>
        </div>
    </div>

    <div class="page-content">
        
<a class="link-hover" href="/Persons/Index">Back to Persons List</a>
<h2>Edit Person</h2>

<div class="w-50">
    <form method="post" action="/Persons/Edit/71cb2bb8-dd80-4d7c-9dba-422489b8fa7e">

        <input type="hidden" data-val="true" data-val-required="The Id field is required." id="Id" name="Id" value="71cb2bb8-dd80-4d7c-9dba-422489b8fa7e" />

        <div class="form-field flex">
            <div class="w-25">
                <label class="form-label" for="Name">Name</label>
            </div>
            <div class="flex-1">
                <input class="form-input" type="text" data-val="true" data-val-required="Person name can&#x27;t be blank" id="Name" name="Name" value="Ad&#xE9;lia Santos" />
                <span class="text-red field-validation-valid" data-valmsg-for="Name" data-valmsg-replace="true"></span>
            </div>
        </div>

        <div class="form-field flex">
            <div class="w-25">
                <label class="form-label" for="Email">Email</label>
            </div>
            <div class="flex-1">
                <input class="form-input" type="email" data-val="true" data-val-email="Email is not valid" data-val-required="Email name can&#x27;t be blank" id="Email" name="Email" value="adelia.santos@hotmail.com" />
                <span class="text-red field-validation-valid" data-valmsg-for="Email" data-valmsg-replace="true"></span>
            </div>
        </div>

        <div class="form-field flex">
            <div class="w-25">
                <label class="form-label" for="BirthDate">Date of Birth</label>
            </div>
            <div class="flex-1">
                <input class="form-input" type="datetime-local" id="BirthDate" name="BirthDate" value="1991-04-16T00:00:00.000" />
                <span class="text-red field-validation-valid" data-valmsg-for="BirthDate" data-valmsg-replace="true"></span>
            </div>
        </div>

        <div class="form-field flex">
            <div class="w-25">
                <label class="form-label">Gender</label>
            </div>
            <div class="flex-1">

                    <input type="radio" value="Male" class="ml" id="Gender" name="Gender" />
                    <label for="genderOption">Male</label>
                    <input type="radio" value="Female" class="ml" checked="checked" id="Gender" name="Gender" />
                    <label for="genderOption">Female</label>
                    <input type="radio" value="Other" class="ml" id="Gender" name="Gender" />
                    <label for="genderOption">Other</label>
                <span class="text-red field-validation-valid" data-valmsg-for="Gender" data-valmsg-replace="true"></span>
            </div>
        </div>

        <div class="form-field flex">
            <div class="w-25">
                <label class="form-label" for="CountryId">Country</label>
            </div>
            <div class="flex-1">
                <select class="form-input" id="CountryId" name="CountryId">
                    <option value="">Please Select</option>
                <option value="87c7d73a-8383-4b22-b728-0c0f1bb6eac0">Argentina</option>
<option value="ea75f617-0e2e-41d8-aa52-0caac5dd9072">Portugal</option>
<option value="a4e032a1-9fc6-4f22-be31-73daf564ad41">USA</option>
<option value="158f59f7-5aad-4c8e-8bd0-ba95f4033887">Italy</option>
<option selected="selected" value="8a05aaee-3985-47e2-8034-f05fa0e8d2ea">Australia</option>
</select>
                <span class="text-red field-validation-valid" data-valmsg-for="CountryId" data-valmsg-replace="true"></span>
            </div>
        </div>

        <div class="form-field flex">
            <div class="w-25">
                <label class="form-label" for="Address">Address</label>
            </div>
            <div class="flex-1">
                <textarea class="form-input" id="Address" name="Address">
Maia</textarea>
                <span class="text-red field-validation-valid" data-valmsg-for="Address" data-valmsg-replace="true"></span>
            </div>
        </div>

        <div class="form-field flex">
            <div class="w-25"></div>
            <div class="flex-1">
                <input type="checkbox" value="true" data-val="true" data-val-required="The ReceivedNewsLetter field is required." id="ReceivedNewsLetter" name="ReceivedNewsLetter" />
                <label class="form-label" for="ReceivedNewsLetter">Received News Letter</label>
                <span class="text-red field-validation-valid" data-valmsg-for="ReceivedNewsLetter" data-valmsg-replace="true"></span>
            </div>
        </div>

        <div class="form-field flex">
            <div class="w-25"></div>
            <div class="flex-1">
                <button class="button button-green-back">Update</button>

                <div class="text-red validation-summary-valid" data-valmsg-summary="true"><ul><li style="display:none"></li>
</ul></div>

            </div>
        </div>
    <input name="__RequestVerificationToken" type="hidden" value="CfDJ8MjJYTxWiPNLuILPUDhb0PkSk8JeuGC03czgv7gyaZQh_ZaGW0w8MCvsKsPeDw-0O2UwFYxFGnRT2EG-HPmZkO20gl66u5DVj7WxjT-9t3kAp8B8aOjr8HVlPw6yDKnfC39Z7w882Fz4eRRAee_nNj0" /><input name="ReceivedNewsLetter" type="hidden" value="false" /></form>
</div>


    </div>

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>(window.jQuery||document.write("\u003Cscript src=\u0022/jquery.min.js\u0022\u003E\u003C/script\u003E"));</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.4/jquery.validate.min.js"></script>
<script>(window.jQuery.validator||document.write("\u003Cscript src=\u0022/jquery.validate.min.js\u0022\u003E\u003C/script\u003E"));</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.12/jquery.validate.unobtrusive.min.js"></script>
<script>(window.jQuery.validate.unobtrusive||document.write("\u003Cscript src=\u0022/jquery.validate.unobtrusive.min.js\u0022\u003E\u003C/script\u003E"));</script>

</body>
</html>

2023-07-16 12:37:00.458 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5166/Persons/Edit/71cb2bb8-dd80-4d7c-9dba-422489b8fa7e - - - 200 - text/html;+charset=utf-8 213.7069ms
2023-07-16 12:37:00.477 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5166/_framework/aspnetcore-browser-refresh.js - -
2023-07-16 12:37:00.479 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5166/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 2.2188ms
2023-07-16 12:37:00.515 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5166/favicon.ico - -
2023-07-16 12:37:00.517 +01:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /favicon.ico
Accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8
Connection: keep-alive
Host: localhost:5166
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36
Accept-Encoding: gzip, deflate, br
Accept-Language: pt-PT,pt;q=0.9,en-US;q=0.8,en;q=0.7
Cookie: [Redacted]
Referer: [Redacted]
sec-ch-ua: [Redacted]
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
Sec-Fetch-Site: [Redacted]
Sec-Fetch-Mode: [Redacted]
Sec-Fetch-Dest: [Redacted]
2023-07-16 12:37:00.519 +01:00 [INF] Response:
StatusCode: 404
2023-07-16 12:37:00.520 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5166/favicon.ico - - - 404 0 - 4.5944ms
2023-07-16 12:37:02.273 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5166/Persons/Index - -
2023-07-16 12:37:02.276 +01:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /Persons/Index
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Connection: keep-alive
Host: localhost:5166
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36
Accept-Encoding: gzip, deflate, br
Accept-Language: pt-PT,pt;q=0.9,en-US;q=0.8,en;q=0.7
Cookie: [Redacted]
Referer: [Redacted]
Upgrade-Insecure-Requests: [Redacted]
sec-ch-ua: [Redacted]
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
Sec-Fetch-Site: [Redacted]
Sec-Fetch-Mode: [Redacted]
Sec-Fetch-User: [Redacted]
Sec-Fetch-Dest: [Redacted]
2023-07-16 12:37:02.279 +01:00 [INF] Executing endpoint 'CrudExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2023-07-16 12:37:02.280 +01:00 [INF] Route matched with {action = "Index", controller = "Persons"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, System.String, System.String, ServiceContracts.Enums.SortOrderOptions) on controller CrudExample.Controllers.PersonsController (ContactsManager.UI).
2023-07-16 12:37:02.283 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:37:02.284 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:37:02.286 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:37:02.287 +01:00 [INF] PersonsListActionFilter.OnActionExecuting method
2023-07-16 12:37:02.288 +01:00 [INF] Index action method of PersonsController
2023-07-16 12:37:02.289 +01:00 [INF] GetFilteredPersons of PersonsService
2023-07-16 12:37:02.290 +01:00 [INF] GetAllPersons of PersonsService
2023-07-16 12:37:02.291 +01:00 [INF] GetAllPersons of PersonsRepository
2023-07-16 12:37:02.292 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.9' with options: None
2023-07-16 12:37:02.295 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Address], [p].[BirthDate], [p].[CountryId], [p].[Email], [p].[Gender], [p].[Name], [p].[ReceivedNewsLetter], [c].[Id], [c].[Name]
FROM [Persons] AS [p]
LEFT JOIN [Countries] AS [c] ON [p].[CountryId] = [c].[Id]
2023-07-16 12:37:02.299 +01:00 [INF] GetSortedPersons of PersonsService
2023-07-16 12:37:02.300 +01:00 [INF] PersonsListActionFilter.OnActionExecuted method
2023-07-16 12:37:02.301 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:37:02.302 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:37:02.304 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:37:02.305 +01:00 [INF] PersonsListResultFilter.OnResultExecutionAsync - before action result
2023-07-16 12:37:02.306 +01:00 [INF] Executing ViewResult, running view Index.
2023-07-16 12:37:02.308 +01:00 [INF] Response:
StatusCode: 200
Content-Type: text/html; charset=utf-8
X-Custom-Key: [Redacted]
2023-07-16 12:37:02.309 +01:00 [INF] Executed ViewResult - view Index executed in 3.2988ms.
2023-07-16 12:37:02.311 +01:00 [INF] PersonsListResultFilter.OnResultExecutionAsync - after action result
2023-07-16 12:37:02.416 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5166/_framework/aspnetcore-browser-refresh.js - -
2023-07-16 12:37:02.417 +01:00 [INF] Executed action CrudExample.Controllers.PersonsController.Index (ContactsManager.UI) in 133.9755ms
2023-07-16 12:37:02.417 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5166/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 51.6284ms
2023-07-16 12:37:02.420 +01:00 [INF] Executed endpoint 'CrudExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2023-07-16 12:37:02.423 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at CrudExample.Filters.ResultFilters.PersonsListResultFilter.OnResultExecutionAsync(ResultExecutingContext context, ResultExecutionDelegate next) in C:\Users\João\aspnetcore\ContactsManagerSolution\ContactsManager.UI\Filters\ResultFilters\PersonsListResultFilter.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-16 12:37:02.433 +01:00 [WRN] The response has already started, the error page middleware will not be executed.
2023-07-16 12:37:02.434 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at CrudExample.Filters.ResultFilters.PersonsListResultFilter.OnResultExecutionAsync(ResultExecutingContext context, ResultExecutionDelegate next) in C:\Users\João\aspnetcore\ContactsManagerSolution\ContactsManager.UI\Filters\ResultFilters\PersonsListResultFilter.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-16 12:37:02.445 +01:00 [WRN] The response has already started, the error page middleware will not be executed.
2023-07-16 12:37:02.461 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5166/Persons/Index - - - 200 - text/html;+charset=utf-8 187.5900ms
2023-07-16 12:37:03.494 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5166/Persons/Create - -
2023-07-16 12:37:03.498 +01:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /Persons/Create
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Connection: keep-alive
Host: localhost:5166
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36
Accept-Encoding: gzip, deflate, br
Accept-Language: pt-PT,pt;q=0.9,en-US;q=0.8,en;q=0.7
Cookie: [Redacted]
Referer: [Redacted]
Upgrade-Insecure-Requests: [Redacted]
sec-ch-ua: [Redacted]
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
Sec-Fetch-Site: [Redacted]
Sec-Fetch-Mode: [Redacted]
Sec-Fetch-User: [Redacted]
Sec-Fetch-Dest: [Redacted]
2023-07-16 12:37:03.501 +01:00 [INF] Executing endpoint 'CrudExample.Controllers.PersonsController.Create (ContactsManager.UI)'
2023-07-16 12:37:03.507 +01:00 [INF] Route matched with {action = "Create", controller = "Persons"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create() on controller CrudExample.Controllers.PersonsController (ContactsManager.UI).
2023-07-16 12:37:03.512 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:37:03.514 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:37:03.515 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:37:03.518 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.9' with options: None
2023-07-16 12:37:03.522 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name]
FROM [Countries] AS [c]
2023-07-16 12:37:03.528 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:37:03.531 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:37:03.532 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:37:03.534 +01:00 [INF] Executing ViewResult, running view Create.
2023-07-16 12:37:03.574 +01:00 [INF] Response:
StatusCode: 200
Content-Type: text/html; charset=utf-8
Cache-Control: [Redacted]
Pragma: [Redacted]
my-key: [Redacted]
X-Custom-Key: [Redacted]
2023-07-16 12:37:03.577 +01:00 [INF] Executed ViewResult - view Create executed in 43.1468ms.
2023-07-16 12:37:03.580 +01:00 [INF] Executed action CrudExample.Controllers.PersonsController.Create (ContactsManager.UI) in 68.6656ms
2023-07-16 12:37:03.586 +01:00 [INF] Executed endpoint 'CrudExample.Controllers.PersonsController.Create (ContactsManager.UI)'
2023-07-16 12:37:03.595 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5166/_framework/aspnetcore-browser-refresh.js - -
2023-07-16 12:37:03.597 +01:00 [INF] ResponseBody: <!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Create Person</title>
    <link rel="stylesheet" href="/StyleSheet.css" />
</head>
<body>
    <div class="container">
        <div class="navbar">
            <div class="navbar-brand">
                <img src="/logo.png?v=_Bl4SCjQHZKOU5aHweT4Ncy1s-zvv6SXNo8gUKmU8oY" width="50px" />
            </div>
            <ul>
                <li>
                    <a href="/Persons/Index">Persons</a>
                    <a href="/Countries/UploadFromExcel">Upload Excel File</a>
                </li>
            </ul>
        </div>
    </div>

    <div class="page-content">
        
<a class="link-hover" href="/Persons/Index">Back to Persons List</a>
<h2>Create Person</h2>

<div class="w-50">
    <form method="post" action="/Persons/Create">
        <div class="form-field flex">
            <div class="w-25">
                <label class="form-label" for="Name">Name</label>
            </div>
            <div class="flex-1">
                <input type="text" data-val="true" data-val-required="Person name can&#x27;t be blank" id="Name" name="Name" value="" />
                <span class="text-red field-validation-valid" data-valmsg-for="Name" data-valmsg-replace="true"></span>
            </div>
        </div>

        <div class="form-field flex">
            <div class="w-25">
                <label class="form-label" for="Email">Email</label>
            </div>
            <div class="flex-1">
                <input type="email" data-val="true" data-val-email="Email is not valid" data-val-required="Email can&#x27;t be blank" id="Email" name="Email" value="" />
                <span class="text-red field-validation-valid" data-valmsg-for="Email" data-valmsg-replace="true"></span>
            </div>
        </div>

        <div class="form-field flex">
            <div class="w-25">
                <label class="form-label" for="BirthDate">Date of Birth</label>
            </div>
            <div class="flex-1">
                <input type="date" id="BirthDate" name="BirthDate" value="" />
                <span class="text-red field-validation-valid" data-valmsg-for="BirthDate" data-valmsg-replace="true"></span>
            </div>
        </div>

        <div class="form-field flex">
            <div class="w-25">
                <label class="form-label">Gender</label>
            </div>
            <div class="flex-1">

                    <input type="radio" value="Male" class="ml" data-val="true" data-val-required="Please select a gender" id="Gender" name="Gender" />
                    <label for="genderOption">Male</label>
                    <input type="radio" value="Female" class="ml" id="Gender" name="Gender" />
                    <label for="genderOption">Female</label>
                    <input type="radio" value="Other" class="ml" id="Gender" name="Gender" />
                    <label for="genderOption">Other</label>
                <span class="text-red field-validation-valid" data-valmsg-for="Gender" data-valmsg-replace="true"></span>
            </div>
        </div>

        <div class="form-field flex">
            <div class="w-25">
                <label class="form-label" for="CountryId">Country</label>
            </div>
            <div class="flex-1">
                <select class="form-input" data-val="true" data-val-required="Please select a country" id="CountryId" name="CountryId">
                    <option value="">Please Select</option>
                <option value="87c7d73a-8383-4b22-b728-0c0f1bb6eac0">Argentina</option>
<option value="ea75f617-0e2e-41d8-aa52-0caac5dd9072">Portugal</option>
<option value="a4e032a1-9fc6-4f22-be31-73daf564ad41">USA</option>
<option value="158f59f7-5aad-4c8e-8bd0-ba95f4033887">Italy</option>
<option value="8a05aaee-3985-47e2-8034-f05fa0e8d2ea">Australia</option>
</select>
                <span class="text-red field-validation-valid" data-valmsg-for="CountryId" data-valmsg-replace="true"></span>
            </div>
        </div>

        <div class="form-field flex">
            <div class="w-25">
                <label class="form-label" for="Address">Address</label>
            </div>
            <div class="flex-1">
                <textarea class="form-input" id="Address" name="Address">
</textarea>
                <span class="text-red field-validation-valid" data-valmsg-for="Address" data-valmsg-replace="true"></span>
            </div>
        </div>

        <div class="form-field flex">
            <div class="w-25"></div>
            <div class="flex-1">
                <input type="checkbox" value="true" data-val="true" data-val-required="The ReceivedNewsLetter field is required." id="ReceivedNewsLetter" name="ReceivedNewsLetter" />
                <label class="form-label" for="ReceivedNewsLetter">Received News Letter</label>
                <span class="text-red field-validation-valid" data-valmsg-for="ReceivedNewsLetter" data-valmsg-replace="true"></span>
            </div>
        </div>

        <div class="form-field flex">
            <div class="w-25"></div>
            <div class="flex-1">
               <button class="button button-green-back">Submit</button>

               <div class="text-red validation-summary-valid" data-valmsg-summary="true"><ul><li style="display:none"></li>
</ul></div>

            </div>
        </div>
    <input name="__RequestVerificationToken" type="hidden" value="CfDJ8MjJYTxWiPNLuILPUDhb0Pmgih6V3jj1y3KfOBkFsdMHHussKR1i9s2qrNQ3gNoUqBn8G3kNIL8c_RyskPV6xj1X_Oq-YcLqXSSOWKR7dMbW1bHPrua2gf5MlzP2alb_dyAR62I46sgPji_0p089ATc" /><input name="ReceivedNewsLetter" type="hidden" value="false" /></form>
</div>


    </div>

    
</body>
</html>

2023-07-16 12:37:03.598 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5166/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 2.3789ms
2023-07-16 12:37:03.606 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5166/Persons/Create - - - 200 - text/html;+charset=utf-8 113.4743ms
2023-07-16 12:37:04.463 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5166/Persons/Index - -
2023-07-16 12:37:04.466 +01:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /Persons/Index
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Connection: keep-alive
Host: localhost:5166
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36
Accept-Encoding: gzip, deflate, br
Accept-Language: pt-PT,pt;q=0.9,en-US;q=0.8,en;q=0.7
Cookie: [Redacted]
Referer: [Redacted]
Upgrade-Insecure-Requests: [Redacted]
sec-ch-ua: [Redacted]
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
Sec-Fetch-Site: [Redacted]
Sec-Fetch-Mode: [Redacted]
Sec-Fetch-User: [Redacted]
Sec-Fetch-Dest: [Redacted]
2023-07-16 12:37:04.470 +01:00 [INF] Executing endpoint 'CrudExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2023-07-16 12:37:04.472 +01:00 [INF] Route matched with {action = "Index", controller = "Persons"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, System.String, System.String, ServiceContracts.Enums.SortOrderOptions) on controller CrudExample.Controllers.PersonsController (ContactsManager.UI).
2023-07-16 12:37:04.474 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:37:04.475 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:37:04.479 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:37:04.480 +01:00 [INF] PersonsListActionFilter.OnActionExecuting method
2023-07-16 12:37:04.481 +01:00 [INF] Index action method of PersonsController
2023-07-16 12:37:04.482 +01:00 [INF] GetFilteredPersons of PersonsService
2023-07-16 12:37:04.483 +01:00 [INF] GetAllPersons of PersonsService
2023-07-16 12:37:04.484 +01:00 [INF] GetAllPersons of PersonsRepository
2023-07-16 12:37:04.486 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.9' with options: None
2023-07-16 12:37:04.490 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Address], [p].[BirthDate], [p].[CountryId], [p].[Email], [p].[Gender], [p].[Name], [p].[ReceivedNewsLetter], [c].[Id], [c].[Name]
FROM [Persons] AS [p]
LEFT JOIN [Countries] AS [c] ON [p].[CountryId] = [c].[Id]
2023-07-16 12:37:04.496 +01:00 [INF] GetSortedPersons of PersonsService
2023-07-16 12:37:04.497 +01:00 [INF] PersonsListActionFilter.OnActionExecuted method
2023-07-16 12:37:04.498 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:37:04.499 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:37:04.501 +01:00 [INF] ResponseHeaderActionFilter.OnActionExecutionAsync method
2023-07-16 12:37:04.502 +01:00 [INF] PersonsListResultFilter.OnResultExecutionAsync - before action result
2023-07-16 12:37:04.503 +01:00 [INF] Executing ViewResult, running view Index.
2023-07-16 12:37:04.505 +01:00 [INF] Response:
StatusCode: 200
Content-Type: text/html; charset=utf-8
X-Custom-Key: [Redacted]
2023-07-16 12:37:04.506 +01:00 [INF] Executed ViewResult - view Index executed in 2.8875ms.
2023-07-16 12:37:04.508 +01:00 [INF] PersonsListResultFilter.OnResultExecutionAsync - after action result
2023-07-16 12:37:04.622 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5166/_framework/aspnetcore-browser-refresh.js - -
2023-07-16 12:37:04.623 +01:00 [INF] Executed action CrudExample.Controllers.PersonsController.Index (ContactsManager.UI) in 149.2935ms
2023-07-16 12:37:04.624 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5166/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 1.7989ms
2023-07-16 12:37:04.630 +01:00 [INF] Executed endpoint 'CrudExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2023-07-16 12:37:04.633 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at CrudExample.Filters.ResultFilters.PersonsListResultFilter.OnResultExecutionAsync(ResultExecutingContext context, ResultExecutionDelegate next) in C:\Users\João\aspnetcore\ContactsManagerSolution\ContactsManager.UI\Filters\ResultFilters\PersonsListResultFilter.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-16 12:37:04.642 +01:00 [WRN] The response has already started, the error page middleware will not be executed.
2023-07-16 12:37:04.644 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at CrudExample.Filters.ResultFilters.PersonsListResultFilter.OnResultExecutionAsync(ResultExecutingContext context, ResultExecutionDelegate next) in C:\Users\João\aspnetcore\ContactsManagerSolution\ContactsManager.UI\Filters\ResultFilters\PersonsListResultFilter.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-16 12:37:04.653 +01:00 [WRN] The response has already started, the error page middleware will not be executed.
2023-07-16 12:37:04.670 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5166/Persons/Index - - - 200 - text/html;+charset=utf-8 206.3964ms
